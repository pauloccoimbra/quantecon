<script>
(function(){
  var KEY = 'jtd-sidebar-collapsed::{{ site.baseurl }}';

  function ensureButton(){
    if (document.getElementById('jtd-sidebar-toggle')) return;
    var btn = document.createElement('button');
    btn.id = 'jtd-sidebar-toggle';
    btn.type = 'button';
    btn.setAttribute('aria-label','Alternar barra lateral');
    btn.textContent = '☰';           // rótulo pedido
    document.body.appendChild(btn);

    // restaura preferência
    if (localStorage.getItem(KEY) === 'true') {
      document.body.classList.add('sidebar-collapsed');
    }

    // alterna e salva
    btn.addEventListener('click', function(){
      document.body.classList.toggle('sidebar-collapsed');
      localStorage.setItem(KEY, document.body.classList.contains('sidebar-collapsed'));
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', ensureButton);
  } else {
    ensureButton();
  }
})();
</script>


