<!-- Botão ☰ + controlador de estado (funciona em qualquer página do tema) -->
<button id="qeToggle"
        type="button"
        title="Mostrar/ocultar navegação"
        aria-label="Mostrar/ocultar navegação">☰</button>

<script>
(function () {
  function setCollapsed(on) {
    document.documentElement.classList.toggle('sidebar-collapsed', !!on);
    try { localStorage.setItem('qe_sidebar_collapsed', on ? '1' : '0'); } catch (e) {}
    var btn = document.getElementById('qeToggle');
    if (btn) btn.setAttribute('aria-pressed', on ? 'true' : 'false');
  }

  // Preferência salva; se nada salvo, começa recolhida no mobile
  try {
    var saved = localStorage.getItem('qe_sidebar_collapsed');
    var startCollapsed = (saved === '1') || (saved === null && window.innerWidth <= 991);
    setCollapsed(startCollapsed);
    // Tema claro (remova se não quiser)
    localStorage.setItem('theme','light');
    document.documentElement.setAttribute('data-theme','light');
  } catch (e) {}

  // Evita botões duplicados
  (function dedupe(){
    var all = document.querySelectorAll('#qeToggle');
    for (var i = 1; i < all.length; i++) all[i].remove();
  })();

  // Clique → alterna
  var btn = document.getElementById('qeToggle');
  if (btn) {
    btn.addEventListener('click', function () {
      var on = document.documentElement.classList.contains('sidebar-collapsed');
      setCollapsed(!on);
    });
  }
})();
</script>
