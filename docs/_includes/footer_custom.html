<script>
(function(){
  var KEY = 'jtd-sidebar-hidden::{{ site.baseurl }}';

  function mount(){
    // cria o botão se não existir
    if (!document.getElementById('jtd-sidebar-toggle')){
      var b = document.createElement('button');
      b.id = 'jtd-sidebar-toggle';
      b.type = 'button';
      b.setAttribute('aria-label','Alternar barra lateral');
      b.textContent = '☰';
      document.body.appendChild(b);

      // restaura preferência
      if (localStorage.getItem(KEY) === 'true'){
        document.body.classList.add('sidebar-hidden');
      }

      // alterna e salva
      b.addEventListener('click', function(){
        document.body.classList.toggle('sidebar-hidden');
        localStorage.setItem(KEY, document.body.classList.contains('sidebar-hidden'));
      });
    }
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', mount);
  } else {
    mount();
  }
})();
</script>

